<!DOCTYPE html>
<html>
<head>
	<title>HellO2</title>
	<script   src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<div id="content">
		<div id='header'>
	
		</div>

		<div id='chat'>

		</div>
		<div id='inputContainer'> 
			<textarea id='input' rows="2" cols="30" onkeypress="handleKeyPress(event)"></textarea>
		</div>
	</div>

	<script type="text/javascript">
		function handleKeyPress(e){
		 var key=e.keyCode || e.which;
		  if (key==13){
		  	submit($('#input')[0].value);
		  	e.preventDefault();
		  	return false;
		  }
		}

		function submit(text){
			console.log('sending: ' + text);
			add('user',text);
			$('#input')[0].value = ""; 
			$.post("/submit",{
				input: text
			},
			function(response){
				console.log(response);
				add('bot',response);
			},
			'text'
			);



			// var aj = $.ajax({
		 //      type: "POST",
		 //      contentType: "application/json",
		 //      url: '/submit2',
		 //      data: { input: text },
		 //      dataType: "json",
		 //      succes : function(data){
			// 	console.log(data);
		 //      }, error: function(a,b,c){
		 //      		console.log(a);
		 //      		console.log(b);
		 //      		console.log(c);
		 //      }
		 //   	});
		 //   	console.log(aj);
		}

		function add(who,text){
			console.log('adding '+ text);
			var container = $('<div>').addClass('textContainer');
			var textBox = $('<div>').addClass('text').addClass(who).html(text).appendTo(container);
			container.appendTo($('#chat'));
		  	var chat    = $('#chat');
		  	chat.scrollTop(chat[0].scrollHeight);
		}

		add("user",'Hello');
		add("bot",'Hello');
		submit("How are you?");
	</script>
</body>
</html>